(this["webpackJsonpspy-pixel-frontend"]=this["webpackJsonpspy-pixel-frontend"]||[]).push([[0],{140:function(e,c,n){},141:function(e,c,n){"use strict";n.r(c);var t=n(0),a=n.n(t),i=n(51),s=n.n(i),r=n(109),j=n(21),l=n(20),o=n(7),d=n.n(o),b=n(50),O=n(10),h=n(110),x=n(99),p=n(156),u=n(164),m=n(163),g=n(159),f=n(161),C=n(56),w=n(1),y=function(){return Object(w.jsx)(b.b,{to:"/",children:Object(w.jsx)(C.a,{size:"big",color:"black",name:"left arrow"})})},v=function(e){var c=e.cookies;return Object(w.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(w.jsx)(g.a.Header,{children:Object(w.jsx)(g.a.Row,{children:Object(w.jsx)(g.a.HeaderCell,{colSpan:"2",children:"Cookies"})})}),Object(w.jsx)(g.a.Body,{children:c&&0===Object.keys(c).length?Object(w.jsx)(g.a.Row,{children:Object(w.jsx)(g.a.Cell,{colSpan:"2",children:"No cookies detected"})}):Object.entries(c).map((function(e){var c=Object(l.a)(e,2),n=c[0],t=c[1];return Object(w.jsxs)(g.a.Row,{children:[Object(w.jsx)(g.a.Cell,{children:n}),Object(w.jsx)(g.a.Cell,{children:t})]},n)}))})]})},k=n(112),I=n.n(k),S=function(e){var c=e.headers,n=I()(c["User-Agent"]);return console.log(c),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(w.jsx)(g.a.Header,{children:Object(w.jsx)(g.a.Row,{children:Object(w.jsx)(g.a.HeaderCell,{colSpan:"2",children:"User Agent".concat(c["User-Agent"].includes("GoogleImageProxy")?" (via GoogleImageProxy)":"")})})}),Object(w.jsxs)(g.a.Body,{children:[Object(w.jsxs)(g.a.Row,{children:[Object(w.jsxs)(g.a.Cell,{children:[Object(w.jsx)(C.a,{name:"chrome"})," Browser"]}),Object(w.jsx)(g.a.Cell,{children:n.browser.name?"".concat(n.browser.name," ").concat(n.browser.version):Object(w.jsx)("i",{children:"unknown"})})]}),Object(w.jsxs)(g.a.Row,{children:[Object(w.jsxs)(g.a.Cell,{children:[Object(w.jsx)(C.a,{name:"mobile alternate"})," Device"]}),Object(w.jsx)(g.a.Cell,{children:n.device.model||Object(w.jsx)("i",{children:"unknown"})})]}),Object(w.jsxs)(g.a.Row,{children:[Object(w.jsxs)(g.a.Cell,{children:[Object(w.jsx)(C.a,{name:"computer"})," OS"]}),Object(w.jsx)(g.a.Cell,{children:n.os.name?"".concat(n.os.name," ").concat(n.os.version):Object(w.jsx)("i",{children:"unknown"})})]}),Object(w.jsxs)(g.a.Row,{children:[Object(w.jsxs)(g.a.Cell,{children:[Object(w.jsx)(C.a,{name:"microchip"})," Architecture"]}),Object(w.jsx)(g.a.Cell,{children:n.cpu.architecture||Object(w.jsx)("i",{children:"unknown"})})]})]})]}),Object(w.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(w.jsx)(g.a.Header,{children:Object(w.jsx)(g.a.Row,{children:Object(w.jsx)(g.a.HeaderCell,{colSpan:"2",children:"Location".concat(c["User-Agent"].includes("GoogleImageProxy")?" (via GoogleImageProxy)":"")})})}),Object(w.jsxs)(g.a.Body,{children:[Object(w.jsxs)(g.a.Row,{children:[Object(w.jsxs)(g.a.Cell,{children:[Object(w.jsx)(C.a,{name:"world"})," Country"]}),Object(w.jsx)(g.a.Cell,{children:c["X-Appengine-Country"]||Object(w.jsx)("i",{children:"unknown"})})]}),Object(w.jsxs)(g.a.Row,{children:[Object(w.jsxs)(g.a.Cell,{children:[Object(w.jsx)(C.a,{name:"building"})," City"]}),Object(w.jsx)(g.a.Cell,{children:c["X-Appengine-City"]||Object(w.jsx)("i",{children:"unknown"})})]}),Object(w.jsxs)(g.a.Row,{children:[Object(w.jsxs)(g.a.Cell,{children:[Object(w.jsx)(C.a,{name:"location arrow"})," IP"]}),Object(w.jsx)(g.a.Cell,{children:c["X-Appengine-User-Ip"]||Object(w.jsx)("i",{children:"unknown"})})]})]})]})]})},R=function(e){var c=e.campaigns,n=Object(O.g)().campaignId,t=c.filter((function(e){return e.id===n})),a=Object(l.a)(t,1)[0];if(!a)return Object(w.jsxs)(p.a,{style:{paddingTop:"4rem"},children:[Object(w.jsx)(y,{}),Object(w.jsxs)(u.a,{as:"h1",children:["Campaigns ",n," not found"]})]});var i=a.logs.map((function(e,c){return{key:"panel-".concat(c),title:"".concat(e.email||"").concat(e.email?" r":"R","ead at ").concat(e.timestamp.toDate().toDateString()," ").concat(e.timestamp.toDate().toLocaleTimeString()),content:{content:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(u.a,{as:"h3",content:"Headers"}),Object(w.jsx)(S,{headers:e.headers}),Object(w.jsx)(u.a,{as:"h3",content:"Cookies"}),Object(w.jsx)(v,{cookies:e.cookies})]})}}})),s=a.logs.map((function(e){return e.email})).filter((function(e,c,n){return n.indexOf(e)===c}));return Object(w.jsxs)(p.a,{style:{paddingTop:"4rem"},children:[Object(w.jsx)(y,{}),Object(w.jsxs)(u.a,{as:"h1",children:[Object(w.jsx)("span",{style:{fontWeight:"normal"},children:"Details for campaign "}),n]}),Object(w.jsxs)(m.a.Group,{children:[Object(w.jsxs)(m.a,{children:[Object(w.jsx)(m.a.Value,{children:a.logs.length}),Object(w.jsx)(m.a.Label,{children:"Total Views"})]}),Object(w.jsxs)(m.a,{children:[Object(w.jsx)(m.a.Value,{children:s.length}),Object(w.jsx)(m.a.Label,{children:"Unique Views"})]})]}),Object(w.jsx)(u.a,{as:"h2",children:"Views per recipient"}),Object(w.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(w.jsx)(g.a.Header,{children:Object(w.jsxs)(g.a.Row,{children:[Object(w.jsx)(g.a.HeaderCell,{children:"Recipient"}),Object(w.jsx)(g.a.HeaderCell,{children:"Number of views"})]})}),Object(w.jsx)(g.a.Body,{children:s.map((function(e){return Object(w.jsxs)(g.a.Row,{children:[Object(w.jsx)(g.a.Cell,{children:e}),Object(w.jsx)(g.a.Cell,{children:a.logs.filter((function(c){return c.email===e})).length})]},e)}))})]}),Object(w.jsx)(u.a,{as:"h2",children:"Logs"}),Object(w.jsx)(f.a,{styled:!0,fluid:!0,exclusive:!1,panels:i}),Object(w.jsx)("div",{style:{height:"10rem"}})]})},L=n(157),P=n(142),G=n(158),A=n(114),D=n.n(A),H=n(160),T=function(e){var c,n=e.campaign;return Object(w.jsxs)(H.a,{children:[Object(w.jsx)(H.a.Content,{header:n.id}),Object(w.jsx)(H.a.Content,{description:"".concat((null===(c=n.logs)||void 0===c?void 0:c.length)||0," views")})]})},B=function(e){var c=e.campaigns,n=Object(t.useState)(""),a=Object(l.a)(n,2),i=a[0],s=a[1],r=Object(t.useState)(""),j=Object(l.a)(r,2),o=j[0],d=j[1],O=Object(t.useState)("copy"),h=Object(l.a)(O,2),x=h[0],m=h[1];return Object(w.jsxs)(p.a,{style:{paddingTop:"4rem"},children:[Object(w.jsx)(u.a,{as:"h1",children:"Dashboard"}),Object(w.jsx)(u.a,{as:"h2",children:"Create a spy pixel!"}),Object(w.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",rowGap:"1rem",columnGap:"1rem"},children:[Object(w.jsx)("div",{children:Object(w.jsx)(L.a,{list:"campaigns",icon:"flag",iconPosition:"left",placeholder:"Campaign ID",onChange:function(e,c){s(c.value),m("copy")}})}),Object(w.jsx)("datalist",{id:"campaigns",children:c.map((function(e){return Object(w.jsx)("option",{value:e.id,children:e.id},e.id)}))}),Object(w.jsx)("div",{children:Object(w.jsx)(L.a,{icon:"mail",iconPosition:"left",placeholder:"Email",onChange:function(e,c){d(c.value),m("copy")}})}),Object(w.jsx)("div",{children:Object(w.jsxs)(P.a,{icon:!0,labelPosition:"left",color:"copy"===x?"blue":"green",onClick:function(){D()('<img width="1" height="1" border="0" src="https://spy-pixel.ts.r.appspot.com/spy-pixel.gif?campaign='.concat(i,"&email=").concat(o,'" />'),{asHtml:!0}),m("check")},children:["Copy to clipboard",Object(w.jsx)(C.a,{name:x})]})})]}),Object(w.jsx)(G.a,{}),Object(w.jsx)(u.a,{as:"h2",children:"Active campaigns"}),Object(w.jsx)("div",{style:{display:"flex",flexWrap:"wrap",rowGap:"2rem",columnGap:"2rem"},children:c.map((function(e){return Object(w.jsx)(b.b,{to:"/campaign/".concat(e.id),children:Object(w.jsx)(T,{campaign:e})},e.id)}))})]})},F=Object(h.a)({apiKey:"AIzaSyD9PDc_JLEKOSiSTrPG-XAFs0ICpfMCyQM",authDomain:"spy-pixel-2e767.firebaseapp.com",projectId:"spy-pixel-2e767",storageBucket:"spy-pixel-2e767.appspot.com",messagingSenderId:"656119548415",appId:"1:656119548415:web:ed558859a4ff701c68ffca",measurementId:"G-J7YG62XPL2"}),U=Object(x.c)(F),V=function(){var e=Object(t.useState)([]),c=Object(l.a)(e,2),n=c[0],a=c[1];return Object(t.useEffect)((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){var c,n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(x.a)(U,"campaigns"),e.next=3,Object(x.b)(c);case 3:n=e.sent,t=n.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),a(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(w.jsx)(b.a,{children:Object(w.jsxs)(O.c,{children:[Object(w.jsx)(O.a,{path:"/",element:Object(w.jsx)(B,{campaigns:n})}),Object(w.jsx)(O.a,{path:"campaign/:campaignId",element:Object(w.jsx)(R,{campaigns:n})}),Object(w.jsx)(O.a,{path:"*",element:Object(w.jsx)("main",{style:{padding:"1rem"},children:Object(w.jsx)("p",{children:"404: There's nothing here!"})})})]})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(c){var n=c.getCLS,t=c.getFID,a=c.getFCP,i=c.getLCP,s=c.getTTFB;n(e),t(e),a(e),i(e),s(e)}))};n(139),n(140);s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(V,{})}),document.getElementById("root")),X()}},[[141,1,2]]]);
//# sourceMappingURL=main.0c5a3308.chunk.js.map