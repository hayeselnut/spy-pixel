(this["webpackJsonpspy-pixel-frontend"]=this["webpackJsonpspy-pixel-frontend"]||[]).push([[0],{140:function(e,c,t){},141:function(e,c,t){"use strict";t.r(c);var n=t(0),a=t.n(n),i=t(51),s=t.n(i),r=t(109),j=t(21),l=t(20),o=t(7),d=t.n(o),b=t(50),x=t(10),O=t(110),h=t(99),p=t(156),u=t(164),m=t(163),g=t(159),f=t(161),y=t(56),C=t(1),w=function(){return Object(C.jsx)(b.b,{to:"/",children:Object(C.jsx)(y.a,{size:"big",color:"black",name:"left arrow"})})},v=function(e){var c=e.cookies;return Object(C.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(C.jsx)(g.a.Header,{children:Object(C.jsx)(g.a.Row,{children:Object(C.jsx)(g.a.HeaderCell,{colSpan:"2",children:"Cookies"})})}),Object(C.jsx)(g.a.Body,{children:c&&0===Object.keys(c).length?Object(C.jsx)(g.a.Row,{children:Object(C.jsx)(g.a.Cell,{colSpan:"2",children:"No cookies detected"})}):Object.entries(c).map((function(e){var c=Object(l.a)(e,2),t=c[0],n=c[1];return Object(C.jsxs)(g.a.Row,{children:[Object(C.jsx)(g.a.Cell,{children:t}),Object(C.jsx)(g.a.Cell,{children:n})]},t)}))})]})},k=t(112),I=t.n(k),S=function(e){var c=e.headers,t=I()(c["User-Agent"]);return console.log(c),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(C.jsx)(g.a.Header,{children:Object(C.jsx)(g.a.Row,{children:Object(C.jsx)(g.a.HeaderCell,{colSpan:"2",children:"User Agent".concat(c["User-Agent"].includes("GoogleImageProxy")?" (via GoogleImageProxy)":"")})})}),Object(C.jsxs)(g.a.Body,{children:[Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Cell,{children:[Object(C.jsx)(y.a,{name:"chrome"})," Browser"]}),Object(C.jsx)(g.a.Cell,{children:t.browser.name?"".concat(t.browser.name," ").concat(t.browser.version):Object(C.jsx)("i",{children:"unknown"})})]}),Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Cell,{children:[Object(C.jsx)(y.a,{name:"mobile alternate"})," Device"]}),Object(C.jsx)(g.a.Cell,{children:t.device.model||Object(C.jsx)("i",{children:"unknown"})})]}),Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Cell,{children:[Object(C.jsx)(y.a,{name:"computer"})," OS"]}),Object(C.jsx)(g.a.Cell,{children:t.os.name?"".concat(t.os.name," ").concat(t.os.version):Object(C.jsx)("i",{children:"unknown"})})]}),Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Cell,{children:[Object(C.jsx)(y.a,{name:"microchip"})," Architecture"]}),Object(C.jsx)(g.a.Cell,{children:t.cpu.architecture||Object(C.jsx)("i",{children:"unknown"})})]})]})]}),Object(C.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(C.jsx)(g.a.Header,{children:Object(C.jsx)(g.a.Row,{children:Object(C.jsx)(g.a.HeaderCell,{colSpan:"2",children:"Location".concat(c["User-Agent"].includes("GoogleImageProxy")?" (via GoogleImageProxy)":"")})})}),Object(C.jsxs)(g.a.Body,{children:[Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Cell,{children:[Object(C.jsx)(y.a,{name:"world"})," Country"]}),Object(C.jsx)(g.a.Cell,{children:c["X-Appengine-Country"]||Object(C.jsx)("i",{children:"unknown"})})]}),Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Cell,{children:[Object(C.jsx)(y.a,{name:"building"})," City"]}),Object(C.jsx)(g.a.Cell,{children:c["X-Appengine-City"]||Object(C.jsx)("i",{children:"unknown"})})]}),Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Cell,{children:[Object(C.jsx)(y.a,{name:"location arrow"})," IP"]}),Object(C.jsx)(g.a.Cell,{children:c["X-Appengine-User-Ip"]||Object(C.jsx)("i",{children:"unknown"})})]})]})]})]})},R=function(e){var c=e.campaigns,t=Object(x.g)().campaignId,n=c.filter((function(e){return e.id===t})),a=Object(l.a)(n,1)[0];if(!a)return Object(C.jsxs)(p.a,{style:{paddingTop:"4rem"},children:[Object(C.jsx)(w,{}),Object(C.jsxs)(u.a,{as:"h1",children:["Campaigns ",t," not found"]})]});var i=a.logs.map((function(e,c){return{key:"panel-".concat(c),title:"".concat(e.email||"").concat(e.email?" r":"R","ead at ").concat(e.timestamp.toDate().toDateString()," ").concat(e.timestamp.toDate().toLocaleTimeString()),content:{content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(u.a,{as:"h3",content:"Headers"}),Object(C.jsx)(S,{headers:e.headers}),Object(C.jsx)(u.a,{as:"h3",content:"Cookies"}),Object(C.jsx)(v,{cookies:e.cookies})]})}}})),s=a.logs.map((function(e){return e.email})).filter((function(e,c,t){return t.indexOf(e)===c}));return Object(C.jsxs)(p.a,{style:{paddingTop:"4rem"},children:[Object(C.jsx)(w,{}),Object(C.jsxs)(u.a,{as:"h1",children:[Object(C.jsx)("span",{style:{fontWeight:"normal"},children:"Details for campaign "}),t]}),Object(C.jsxs)(m.a.Group,{children:[Object(C.jsxs)(m.a,{children:[Object(C.jsx)(m.a.Value,{children:a.logs.length}),Object(C.jsx)(m.a.Label,{children:"Total Views"})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(m.a.Value,{children:s.length}),Object(C.jsx)(m.a.Label,{children:"Unique Views"})]})]}),Object(C.jsx)(u.a,{as:"h2",children:"Views per recipient"}),Object(C.jsxs)(g.a,{compact:!0,celled:!0,striped:!0,singleLine:!0,children:[Object(C.jsx)(g.a.Header,{children:Object(C.jsxs)(g.a.Row,{children:[Object(C.jsx)(g.a.HeaderCell,{children:"Recipient"}),Object(C.jsx)(g.a.HeaderCell,{children:"Number of views"})]})}),Object(C.jsx)(g.a.Body,{children:s.map((function(e){return Object(C.jsxs)(g.a.Row,{children:[Object(C.jsx)(g.a.Cell,{children:e}),Object(C.jsx)(g.a.Cell,{children:a.logs.filter((function(c){return c.email===e})).length})]},e)}))})]}),Object(C.jsx)(u.a,{as:"h2",children:"Logs"}),Object(C.jsx)(f.a,{styled:!0,fluid:!0,exclusive:!1,panels:i}),Object(C.jsx)("div",{style:{height:"10rem"}})]})},L=t(157),P=t(142),G=t(158),A=t(114),D=t.n(A),H=t(160),T=function(e){var c,t=e.campaign;return Object(C.jsxs)(H.a,{children:[Object(C.jsx)(H.a.Content,{header:t.id}),Object(C.jsx)(H.a.Content,{description:"".concat((null===(c=t.logs)||void 0===c?void 0:c.length)||0," views")})]})},B=function(e){var c=e.campaigns,t=Object(n.useState)(""),a=Object(l.a)(t,2),i=a[0],s=a[1],r=Object(n.useState)(""),j=Object(l.a)(r,2),o=j[0],d=j[1],x=Object(n.useState)("copy"),O=Object(l.a)(x,2),h=O[0],m=O[1];return Object(C.jsxs)(p.a,{style:{paddingTop:"4rem"},children:[Object(C.jsx)(u.a,{as:"h1",children:"Dashboard"}),Object(C.jsx)(u.a,{as:"h2",children:"Create a spy pixel!"}),Object(C.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",rowGap:"1rem",columnGap:"1rem"},children:[Object(C.jsx)("div",{children:Object(C.jsx)(L.a,{list:"campaigns",icon:"flag",iconPosition:"left",placeholder:"Campaign ID",onChange:function(e,c){s(c.value),m("copy")}})}),Object(C.jsx)("datalist",{id:"campaigns",children:c.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.id},e.id)}))}),Object(C.jsx)("div",{children:Object(C.jsx)(L.a,{icon:"mail",iconPosition:"left",placeholder:"Email",onChange:function(e,c){d(c.value),m("copy")}})}),Object(C.jsx)("div",{children:Object(C.jsxs)(P.a,{icon:!0,labelPosition:"left",color:"copy"===h?"blue":"green",onClick:function(){D()('<img width="1" height="1" border="0" src="https://spy-pixel.ts.r.appspot.com/spy-pixel.gif?campaign='.concat(i,"&email=").concat(o,'" />'),{asHtml:!0}),m("check")},children:["Copy to clipboard",Object(C.jsx)(y.a,{name:h})]})})]}),Object(C.jsx)(G.a,{}),Object(C.jsx)(u.a,{as:"h2",children:"Active campaigns"}),Object(C.jsx)("div",{style:{display:"flex",flexWrap:"wrap",rowGap:"2rem",columnGap:"2rem"},children:c.map((function(e){return Object(C.jsx)(b.b,{to:"/campaign/".concat(e.id),children:Object(C.jsx)(T,{campaign:e})},e.id)}))})]})},F=Object(O.a)({apiKey:"AIzaSyD9PDc_JLEKOSiSTrPG-XAFs0ICpfMCyQM",authDomain:"spy-pixel-2e767.firebaseapp.com",projectId:"spy-pixel-2e767",storageBucket:"spy-pixel-2e767.appspot.com",messagingSenderId:"656119548415",appId:"1:656119548415:web:ed558859a4ff701c68ffca",measurementId:"G-J7YG62XPL2"}),U=Object(h.c)(F),V=function(){var e=Object(n.useState)([]),c=Object(l.a)(e,2),t=c[0],a=c[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){var c,t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(h.a)(U,"campaigns"),e.next=3,Object(h.b)(c);case 3:t=e.sent,n=t.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})),a(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(C.jsx)(b.a,{children:Object(C.jsxs)(x.c,{children:[Object(C.jsx)(x.a,{exact:!0,path:"/spy-pixel/",element:Object(C.jsx)(B,{campaigns:t})}),Object(C.jsx)(x.a,{exact:!0,path:"/spy-pixel/campaign/:campaignId",element:Object(C.jsx)(R,{campaigns:t})}),Object(C.jsx)(x.a,{path:"*",element:Object(C.jsx)("main",{style:{padding:"1rem"},children:Object(C.jsx)("p",{children:"404: There's nothing here!"})})})]})})},X=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,165)).then((function(c){var t=c.getCLS,n=c.getFID,a=c.getFCP,i=c.getLCP,s=c.getTTFB;t(e),n(e),a(e),i(e),s(e)}))};t(139),t(140);s.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(V,{})}),document.getElementById("root")),X()}},[[141,1,2]]]);
//# sourceMappingURL=main.f899be6b.chunk.js.map